14:36:55:232  INFO 21596 --- [main] com.hmall.pay.PayApplication             : Starting PayApplication using Java 11.0.21 on DESKTOP-H0DG4VR with PID 21596 (D:\code\hmall\pay-service\target\classes started by Lalique in D:\code\hmall)
14:36:55:243 DEBUG 21596 --- [main] com.hmall.pay.PayApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
14:36:55:244  INFO 21596 --- [main] com.hmall.pay.PayApplication             : The following 1 profile is active: "local"
14:36:58:089  INFO 21596 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=01d8b01a-9dca-395a-8a21-45a8fef661c6
14:36:58:749  INFO 21596 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8086 (http)
14:36:58:767  INFO 21596 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
14:36:58:768  INFO 21596 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
14:36:59:122  INFO 21596 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
14:36:59:122  INFO 21596 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3762 ms
14:36:59:614  INFO 21596 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
14:36:59:744  INFO 21596 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
14:37:12:402  INFO 21596 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
14:37:16:027  INFO 21596 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of f5d9007d-b37a-41b9-9154-26f8ac5d0414
14:37:16:144  INFO 21596 --- [main] org.reflections.Reflections              : Reflections took 69 ms to scan 1 urls, producing 3 keys and 6 values 
14:37:16:219  INFO 21596 --- [main] org.reflections.Reflections              : Reflections took 35 ms to scan 1 urls, producing 4 keys and 9 values 
14:37:16:260  INFO 21596 --- [main] org.reflections.Reflections              : Reflections took 33 ms to scan 1 urls, producing 3 keys and 10 values 
14:37:16:266  WARN 21596 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
14:37:16:294  INFO 21596 --- [main] org.reflections.Reflections              : Reflections took 27 ms to scan 1 urls, producing 1 keys and 5 values 
14:37:16:326  INFO 21596 --- [main] org.reflections.Reflections              : Reflections took 27 ms to scan 1 urls, producing 1 keys and 7 values 
14:37:16:370  INFO 21596 --- [main] org.reflections.Reflections              : Reflections took 33 ms to scan 1 urls, producing 2 keys and 8 values 
14:37:16:379  WARN 21596 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
14:37:16:381  INFO 21596 --- [main] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] RpcClient init label, labels = {module=naming, source=sdk}
14:37:16:386  INFO 21596 --- [main] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
14:37:16:386  INFO 21596 --- [main] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
14:37:16:388  INFO 21596 --- [main] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
14:37:16:393  INFO 21596 --- [main] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
14:37:24:638 ERROR 21596 --- [main] c.a.n.c.remote.client.grpc.GrpcClient    : Server check fail, please check server 127.0.0.1 ,port 9848 is available , error ={}

java.util.concurrent.TimeoutException: Waited 3000 milliseconds (plus 17 milliseconds, 753000 nanoseconds delay) for com.alibaba.nacos.shaded.io.grpc.stub.ClientCalls$GrpcFuture@29b4444a[status=PENDING, info=[GrpcFuture{clientCall={delegate={delegate=ClientCallImpl{method=MethodDescriptor{fullMethodName=Request/request, type=UNARY, idempotent=false, safe=false, sampledToLocalTracing=true, requestMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@2b540131, responseMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@225ac5e7, schemaDescriptor=com.alibaba.nacos.api.grpc.auto.RequestGrpc$RequestMethodDescriptorSupplier@4c91f5bf}}}}}]]
	at com.alibaba.nacos.shaded.com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:508) ~[nacos-client-2.0.4.jar:na]
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.serverCheck(GrpcClient.java:148) ~[nacos-client-2.0.4.jar:na]
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.connectToServer(GrpcClient.java:264) ~[nacos-client-2.0.4.jar:na]
	at com.alibaba.nacos.common.remote.client.RpcClient.start(RpcClient.java:390) ~[nacos-client-2.0.4.jar:na]
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.start(NamingGrpcClientProxy.java:96) ~[nacos-client-2.0.4.jar:na]
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.<init>(NamingGrpcClientProxy.java:89) ~[nacos-client-2.0.4.jar:na]
	at com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate.<init>(NamingClientProxyDelegate.java:76) ~[nacos-client-2.0.4.jar:na]
	at com.alibaba.nacos.client.naming.NacosNamingService.init(NacosNamingService.java:95) ~[nacos-client-2.0.4.jar:na]
	at com.alibaba.nacos.client.naming.NacosNamingService.<init>(NacosNamingService.java:81) ~[nacos-client-2.0.4.jar:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490) ~[na:na]
	at com.alibaba.nacos.api.naming.NamingFactory.createNamingService(NamingFactory.java:59) ~[nacos-client-2.0.4.jar:na]
	at com.alibaba.nacos.api.NacosFactory.createNamingService(NacosFactory.java:77) ~[nacos-client-2.0.4.jar:na]
	at com.alibaba.cloud.nacos.NacosServiceManager.createNewNamingService(NacosServiceManager.java:99) ~[spring-cloud-starter-alibaba-nacos-discovery-2021.0.4.0.jar:2021.0.4.0]
	at com.alibaba.cloud.nacos.NacosServiceManager.buildNamingService(NacosServiceManager.java:90) ~[spring-cloud-starter-alibaba-nacos-discovery-2021.0.4.0.jar:2021.0.4.0]
	at com.alibaba.cloud.nacos.NacosServiceManager.getNamingService(NacosServiceManager.java:46) ~[spring-cloud-starter-alibaba-nacos-discovery-2021.0.4.0.jar:2021.0.4.0]
	at com.alibaba.cloud.nacos.discovery.NacosWatch.start(NacosWatch.java:130) ~[spring-cloud-starter-alibaba-nacos-discovery-2021.0.4.0.jar:2021.0.4.0]
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178) ~[spring-context-5.3.27.jar:5.3.27]
	at org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:54) ~[spring-context-5.3.27.jar:5.3.27]
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:356) ~[spring-context-5.3.27.jar:5.3.27]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:155) ~[spring-context-5.3.27.jar:5.3.27]
	at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:123) ~[spring-context-5.3.27.jar:5.3.27]
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:937) ~[spring-context-5.3.27.jar:5.3.27]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:586) ~[spring-context-5.3.27.jar:5.3.27]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292) ~[spring-boot-2.7.12.jar:2.7.12]
	at com.hmall.pay.PayApplication.main(PayApplication.java:14) ~[classes/:na]

14:37:24:646  INFO 21596 --- [main] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
14:37:27:274  INFO 21596 --- [main] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1719038246920_172.17.0.1_48378
14:37:27:278  INFO 21596 --- [main] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
14:37:27:279  INFO 21596 --- [main] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$979/0x00000008006cb840
14:37:27:276  INFO 21596 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Notify connected event to listeners.
14:37:27:409  INFO 21596 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8086 (http) with context path ''
14:37:27:456  INFO 21596 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 192.168.3.79:8086 register finished
14:37:27:967  INFO 21596 --- [nacos-grpc-client-executor-10] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Receive server push request, request = NotifySubscriberRequest, requestId = 3
14:37:27:977  INFO 21596 --- [nacos-grpc-client-executor-10] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Ack server push request, request = NotifySubscriberRequest, requestId = 3
14:37:30:627  INFO 21596 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
14:37:30:633  INFO 21596 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
14:37:30:688  INFO 21596 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
14:37:30:962  INFO 21596 --- [main] com.hmall.pay.PayApplication             : Started PayApplication in 39.287 seconds (JVM running for 42.901)
16:04:44:756  INFO 21596 --- [http-nio-8086-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
16:04:44:761  INFO 21596 --- [http-nio-8086-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
16:04:44:793  INFO 21596 --- [http-nio-8086-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 32 ms
16:04:45:227  INFO 21596 --- [http-nio-8086-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
16:04:45:840  INFO 21596 --- [http-nio-8086-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
16:04:45:855 DEBUG 21596 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
16:04:45:895 DEBUG 21596 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1804414508919341057(Long)
16:04:45:944 DEBUG 21596 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
16:04:46:064 DEBUG 21596 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
16:04:46:073 DEBUG 21596 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1804425280164659202(Long), 1804414508919341057(Long), 1804425280164659201(Long), 1(Long), balance(String), 58800(Integer), 5(Integer), 1(Integer), 2024-06-22T18:04:46.045667800(LocalDateTime)
16:04:46:084 DEBUG 21596 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
16:05:27:761 DEBUG 21596 --- [http-nio-8086-exec-3] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
16:05:27:761 DEBUG 21596 --- [http-nio-8086-exec-3] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1804425452919635970(Long)
16:05:27:764 DEBUG 21596 --- [http-nio-8086-exec-3] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
16:05:27:769 DEBUG 21596 --- [http-nio-8086-exec-3] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
16:05:27:770 DEBUG 21596 --- [http-nio-8086-exec-3] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1804425455138439171(Long), 1804425452919635970(Long), 1804425455138439170(Long), 1(Long), balance(String), 71800(Integer), 5(Integer), 1(Integer), 2024-06-22T18:05:27.766165200(LocalDateTime)
16:05:27:779 DEBUG 21596 --- [http-nio-8086-exec-3] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
16:05:36:143 DEBUG 21596 --- [http-nio-8086-exec-4] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
16:05:36:144 DEBUG 21596 --- [http-nio-8086-exec-4] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1804425455138439171(Long)
16:05:36:153 DEBUG 21596 --- [http-nio-8086-exec-4] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
16:05:36:166 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=71800 HTTP/1.1
16:05:36:166 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
16:05:36:166 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
16:05:36:554 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200 (386ms)
16:05:36:555 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
16:05:36:555 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
16:05:36:555 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Sat, 22 Jun 2024 08:05:36 GMT
16:05:36:555 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
16:05:36:555 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
16:05:36:555 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
16:05:36:566 DEBUG 21596 --- [http-nio-8086-exec-4] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
16:05:36:568 DEBUG 21596 --- [http-nio-8086-exec-4] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2024-06-22T16:05:36.556316900(LocalDateTime), 1804425455138439171(Long), 0(Integer), 1(Integer)
16:05:36:573 DEBUG 21596 --- [http-nio-8086-exec-4] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
16:05:36:574 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] ---> PUT http://trade-service/orders/1804425452919635970 HTTP/1.1
16:05:36:574 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] user-info: 1
16:05:36:574 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] ---> END HTTP (0-byte body)
16:05:36:641 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] <--- HTTP/1.1 200 (67ms)
16:05:36:641 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] connection: keep-alive
16:05:36:641 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] content-length: 0
16:05:36:642 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] date: Sat, 22 Jun 2024 08:05:36 GMT
16:05:36:642 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] keep-alive: timeout=60
16:05:36:642 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] 
16:05:36:642 DEBUG 21596 --- [http-nio-8086-exec-4] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] <--- END HTTP (0-byte body)
16:05:36:916  INFO 21596 --- [nacos-grpc-client-executor-931] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Receive server push request, request = NotifySubscriberRequest, requestId = 37
16:05:36:919  INFO 21596 --- [nacos-grpc-client-executor-931] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Ack server push request, request = NotifySubscriberRequest, requestId = 37
16:05:37:108  INFO 21596 --- [nacos-grpc-client-executor-932] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Receive server push request, request = NotifySubscriberRequest, requestId = 38
16:05:37:109  INFO 21596 --- [nacos-grpc-client-executor-932] com.alibaba.nacos.common.remote.client   : [f5d9007d-b37a-41b9-9154-26f8ac5d0414] Ack server push request, request = NotifySubscriberRequest, requestId = 38
16:14:26:039  WARN 21596 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
16:14:26:039  WARN 21596 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
16:14:26:039  WARN 21596 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
16:14:26:039  WARN 21596 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
16:14:27:218  INFO 21596 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
16:14:27:224  INFO 21596 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
16:14:27:549  INFO 21596 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
16:14:27:549  INFO 21596 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@4dfd4b05[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
16:14:27:549  INFO 21596 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1719038246920_172.17.0.1_48378
16:14:27:571  INFO 21596 --- [nacos-grpc-client-executor-1050] c.a.n.c.remote.client.grpc.GrpcClient    : [1719038246920_172.17.0.1_48378]Ignore complete event,isRunning:false,isAbandon=false
16:14:27:574  INFO 21596 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@1888ff5a[Running, pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 1051]
16:14:27:589  INFO 21596 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
16:14:27:615  INFO 21596 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
16:14:38:415  INFO 19516 --- [main] com.hmall.pay.PayApplication             : Starting PayApplication using Java 11.0.21 on DESKTOP-H0DG4VR with PID 19516 (D:\code\hmall\pay-service\target\classes started by Lalique in D:\code\hmall)
16:14:38:418 DEBUG 19516 --- [main] com.hmall.pay.PayApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
16:14:38:418  INFO 19516 --- [main] com.hmall.pay.PayApplication             : The following 1 profile is active: "local"
16:14:39:747  INFO 19516 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=01d8b01a-9dca-395a-8a21-45a8fef661c6
16:14:40:163  INFO 19516 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8086 (http)
16:14:40:174  INFO 19516 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
16:14:40:174  INFO 19516 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
16:14:40:347  INFO 19516 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
16:14:40:348  INFO 19516 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1872 ms
16:14:40:605  INFO 19516 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
16:14:40:685  INFO 19516 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
16:14:46:282  INFO 19516 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
16:14:47:900  INFO 19516 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of b9fb3f79-e81d-42f9-8c84-aa8aa1b16113
16:14:47:949  INFO 19516 --- [main] org.reflections.Reflections              : Reflections took 26 ms to scan 1 urls, producing 3 keys and 6 values 
16:14:47:977  INFO 19516 --- [main] org.reflections.Reflections              : Reflections took 11 ms to scan 1 urls, producing 4 keys and 9 values 
16:14:47:990  INFO 19516 --- [main] org.reflections.Reflections              : Reflections took 9 ms to scan 1 urls, producing 3 keys and 10 values 
16:14:47:993  WARN 19516 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:14:48:003  INFO 19516 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 1 keys and 5 values 
16:14:48:019  INFO 19516 --- [main] org.reflections.Reflections              : Reflections took 14 ms to scan 1 urls, producing 1 keys and 7 values 
16:14:48:031  INFO 19516 --- [main] org.reflections.Reflections              : Reflections took 9 ms to scan 1 urls, producing 2 keys and 8 values 
16:14:48:034  WARN 19516 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:14:48:035  INFO 19516 --- [main] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] RpcClient init label, labels = {module=naming, source=sdk}
16:14:48:038  INFO 19516 --- [main] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
16:14:48:038  INFO 19516 --- [main] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
16:14:48:039  INFO 19516 --- [main] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
16:14:48:040  INFO 19516 --- [main] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
16:14:51:842  INFO 19516 --- [main] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1719044091599_172.17.0.1_37700
16:14:51:843  INFO 19516 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Notify connected event to listeners.
16:14:51:845  INFO 19516 --- [main] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
16:14:51:846  INFO 19516 --- [main] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$979/0x00000008006d4040
16:14:51:915  INFO 19516 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8086 (http) with context path ''
16:14:51:927  INFO 19516 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 192.168.3.79:8086 register finished
16:14:52:402  INFO 19516 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Receive server push request, request = NotifySubscriberRequest, requestId = 40
16:14:52:406  INFO 19516 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Ack server push request, request = NotifySubscriberRequest, requestId = 40
16:14:53:196  INFO 19516 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
16:14:53:198  INFO 19516 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
16:14:53:229  INFO 19516 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
16:14:53:344  INFO 19516 --- [main] com.hmall.pay.PayApplication             : Started PayApplication in 17.913 seconds (JVM running for 20.668)
16:17:40:581  INFO 19516 --- [http-nio-8086-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
16:17:40:582  INFO 19516 --- [http-nio-8086-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
16:17:40:583  INFO 19516 --- [http-nio-8086-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
16:17:40:741  INFO 19516 --- [http-nio-8086-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
16:17:41:056  INFO 19516 --- [http-nio-8086-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
16:17:41:063 DEBUG 19516 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
16:17:41:079 DEBUG 19516 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1804428526463664130(Long)
16:17:41:099 DEBUG 19516 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
16:17:41:138 DEBUG 19516 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
16:17:41:141 DEBUG 19516 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1804428531115159554(Long), 1804428526463664130(Long), 1804428531115159553(Long), 1(Long), balance(String), 224900(Integer), 5(Integer), 1(Integer), 2024-06-22T18:17:41.134742800(LocalDateTime)
16:17:41:148 DEBUG 19516 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
16:17:46:465 DEBUG 19516 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
16:17:46:466 DEBUG 19516 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1804428531115159554(Long)
16:17:46:476 DEBUG 19516 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
16:17:46:479 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=224900 HTTP/1.1
16:17:46:479 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
16:17:46:479 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
16:17:46:681 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200 (200ms)
16:17:46:681 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
16:17:46:681 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
16:17:46:681 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Sat, 22 Jun 2024 08:17:46 GMT
16:17:46:682 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
16:17:46:682 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
16:17:46:682 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
16:17:46:688 DEBUG 19516 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
16:17:46:689 DEBUG 19516 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2024-06-22T16:17:46.683031600(LocalDateTime), 1804428531115159554(Long), 0(Integer), 1(Integer)
16:17:46:693 DEBUG 19516 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
16:17:46:694 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] ---> PUT http://trade-service/orders/1804428526463664130 HTTP/1.1
16:17:46:694 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] user-info: 1
16:17:46:694 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] ---> END HTTP (0-byte body)
16:17:46:727 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] <--- HTTP/1.1 200 (33ms)
16:17:46:727 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] connection: keep-alive
16:17:46:727 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] content-length: 0
16:17:46:727 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] date: Sat, 22 Jun 2024 08:17:46 GMT
16:17:46:727 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] keep-alive: timeout=60
16:17:46:727 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] 
16:17:46:727 DEBUG 19516 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] <--- END HTTP (0-byte body)
16:17:47:139  INFO 19516 --- [nacos-grpc-client-executor-48] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Receive server push request, request = NotifySubscriberRequest, requestId = 42
16:17:47:150  INFO 19516 --- [nacos-grpc-client-executor-48] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Ack server push request, request = NotifySubscriberRequest, requestId = 42
16:17:47:242  INFO 19516 --- [nacos-grpc-client-executor-49] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Receive server push request, request = NotifySubscriberRequest, requestId = 43
16:17:47:244  INFO 19516 --- [nacos-grpc-client-executor-49] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Ack server push request, request = NotifySubscriberRequest, requestId = 43
16:34:54:761 DEBUG 19516 --- [http-nio-8086-exec-7] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
16:34:54:763 DEBUG 19516 --- [http-nio-8086-exec-7] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1804432863298502658(Long)
16:34:54:770 DEBUG 19516 --- [http-nio-8086-exec-7] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
16:34:54:774 DEBUG 19516 --- [http-nio-8086-exec-7] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
16:34:54:777 DEBUG 19516 --- [http-nio-8086-exec-7] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1804432866461020162(Long), 1804432863298502658(Long), 1804432866461020161(Long), 1(Long), balance(String), 9700(Integer), 5(Integer), 1(Integer), 2024-06-22T18:34:54.771973700(LocalDateTime)
16:34:54:785 DEBUG 19516 --- [http-nio-8086-exec-7] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
16:34:57:948 DEBUG 19516 --- [http-nio-8086-exec-3] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
16:34:57:948 DEBUG 19516 --- [http-nio-8086-exec-3] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1804432866461020162(Long)
16:34:57:952 DEBUG 19516 --- [http-nio-8086-exec-3] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
16:34:57:954 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=9700 HTTP/1.1
16:34:57:954 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
16:34:57:955 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
16:34:58:083 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200 (128ms)
16:34:58:083 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
16:34:58:083 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
16:34:58:083 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Sat, 22 Jun 2024 08:34:58 GMT
16:34:58:083 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
16:34:58:083 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
16:34:58:083 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
16:34:58:086 DEBUG 19516 --- [http-nio-8086-exec-3] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
16:34:58:087 DEBUG 19516 --- [http-nio-8086-exec-3] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2024-06-22T16:34:58.083873600(LocalDateTime), 1804432866461020162(Long), 0(Integer), 1(Integer)
16:34:58:090 DEBUG 19516 --- [http-nio-8086-exec-3] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
16:34:58:090 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] ---> PUT http://trade-service/orders/1804432863298502658 HTTP/1.1
16:34:58:090 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] user-info: 1
16:34:58:090 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] ---> END HTTP (0-byte body)
16:34:58:103 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] <--- HTTP/1.1 200 (12ms)
16:34:58:103 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] connection: keep-alive
16:34:58:103 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] content-length: 0
16:34:58:103 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] date: Sat, 22 Jun 2024 08:34:58 GMT
16:34:58:103 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] keep-alive: timeout=60
16:34:58:104 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] 
16:34:58:104 DEBUG 19516 --- [http-nio-8086-exec-3] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] <--- END HTTP (0-byte body)
17:49:58:506  INFO 19516 --- [nacos-grpc-client-executor-1256] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Receive server push request, request = NotifySubscriberRequest, requestId = 58
17:49:58:524  INFO 19516 --- [nacos-grpc-client-executor-1256] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Ack server push request, request = NotifySubscriberRequest, requestId = 58
17:50:33:950  INFO 19516 --- [nacos-grpc-client-executor-1263] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Receive server push request, request = NotifySubscriberRequest, requestId = 61
17:50:33:954  INFO 19516 --- [nacos-grpc-client-executor-1263] com.alibaba.nacos.common.remote.client   : [b9fb3f79-e81d-42f9-8c84-aa8aa1b16113] Ack server push request, request = NotifySubscriberRequest, requestId = 61
17:59:07:009  WARN 19516 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
17:59:07:011  WARN 19516 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
17:59:07:011  WARN 19516 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
17:59:07:019  WARN 19516 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
17:59:08:613  INFO 19516 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
17:59:08:621  INFO 19516 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
17:59:08:955  INFO 19516 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
17:59:08:955  INFO 19516 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@42b0d137[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
17:59:08:956  INFO 19516 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1719044091599_172.17.0.1_37700
17:59:08:961  INFO 19516 --- [nacos-grpc-client-executor-1377] c.a.n.c.remote.client.grpc.GrpcClient    : [1719044091599_172.17.0.1_37700]Ignore complete event,isRunning:false,isAbandon=false
17:59:08:979  INFO 19516 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7daafdea[Running, pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 1378]
17:59:08:997  INFO 19516 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
17:59:09:044  INFO 19516 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
17:59:29:189  INFO 18584 --- [main] com.hmall.pay.PayApplication             : Starting PayApplication using Java 11.0.21 on DESKTOP-H0DG4VR with PID 18584 (D:\code\hmall\pay-service\target\classes started by Lalique in D:\code\hmall)
17:59:29:192 DEBUG 18584 --- [main] com.hmall.pay.PayApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
17:59:29:193  INFO 18584 --- [main] com.hmall.pay.PayApplication             : The following 1 profile is active: "local"
17:59:31:673  INFO 18584 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=3ca7418c-d5dd-3997-baa2-cb984f7a25f2
17:59:32:413  INFO 18584 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8086 (http)
17:59:32:426  INFO 18584 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
17:59:32:427  INFO 18584 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
17:59:32:675  INFO 18584 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
17:59:32:675  INFO 18584 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3423 ms
17:59:32:970  INFO 18584 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
17:59:33:056  INFO 18584 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
17:59:39:681  INFO 18584 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
17:59:41:617  INFO 18584 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 6170ea93-0113-4977-bbde-0c0492fc7022
17:59:41:675  INFO 18584 --- [main] org.reflections.Reflections              : Reflections took 32 ms to scan 1 urls, producing 3 keys and 6 values 
17:59:41:710  INFO 18584 --- [main] org.reflections.Reflections              : Reflections took 14 ms to scan 1 urls, producing 4 keys and 9 values 
17:59:41:729  INFO 18584 --- [main] org.reflections.Reflections              : Reflections took 15 ms to scan 1 urls, producing 3 keys and 10 values 
17:59:41:734  WARN 18584 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
17:59:41:751  INFO 18584 --- [main] org.reflections.Reflections              : Reflections took 16 ms to scan 1 urls, producing 1 keys and 5 values 
17:59:41:789  INFO 18584 --- [main] org.reflections.Reflections              : Reflections took 35 ms to scan 1 urls, producing 1 keys and 7 values 
17:59:41:804  INFO 18584 --- [main] org.reflections.Reflections              : Reflections took 12 ms to scan 1 urls, producing 2 keys and 8 values 
17:59:41:807  WARN 18584 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
17:59:41:808  INFO 18584 --- [main] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] RpcClient init label, labels = {module=naming, source=sdk}
17:59:41:811  INFO 18584 --- [main] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
17:59:41:811  INFO 18584 --- [main] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
17:59:41:812  INFO 18584 --- [main] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
17:59:41:814  INFO 18584 --- [main] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
17:59:45:865  INFO 18584 --- [main] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1719050385643_172.17.0.1_36282
17:59:45:867  INFO 18584 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] Notify connected event to listeners.
17:59:45:869  INFO 18584 --- [main] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
17:59:45:871  INFO 18584 --- [main] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1072/0x0000000800880040
17:59:45:928  INFO 18584 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8086 (http) with context path ''
17:59:45:940  INFO 18584 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 192.168.3.79:8086 register finished
17:59:46:429  INFO 18584 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] Receive server push request, request = NotifySubscriberRequest, requestId = 64
17:59:46:433  INFO 18584 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] Ack server push request, request = NotifySubscriberRequest, requestId = 64
17:59:47:743  INFO 18584 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
17:59:47:751  INFO 18584 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
17:59:47:810  INFO 18584 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
17:59:48:052  INFO 18584 --- [main] com.hmall.pay.PayApplication             : Started PayApplication in 22.292 seconds (JVM running for 27.924)
18:01:05:029  INFO 18584 --- [http-nio-8086-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
18:01:05:029  INFO 18584 --- [http-nio-8086-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
18:01:05:031  INFO 18584 --- [http-nio-8086-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
18:01:05:174  INFO 18584 --- [http-nio-8086-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
18:01:05:495  INFO 18584 --- [http-nio-8086-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
18:01:05:504 DEBUG 18584 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
18:01:05:530 DEBUG 18584 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1804454548001230849(Long)
18:01:05:555 DEBUG 18584 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
18:01:05:616 DEBUG 18584 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
18:01:05:621 DEBUG 18584 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1804454554565242883(Long), 1804454548001230849(Long), 1804454554565242882(Long), 1(Long), balance(String), 9700(Integer), 5(Integer), 1(Integer), 2024-06-22T20:01:05.607782900(LocalDateTime)
18:01:05:628 DEBUG 18584 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
18:01:07:886 DEBUG 18584 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
18:01:07:886 DEBUG 18584 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1804454554565242883(Long)
18:01:07:892 DEBUG 18584 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
18:01:07:897 DEBUG 18584 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=9700 HTTP/1.1
18:01:07:897 DEBUG 18584 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
18:01:07:897 DEBUG 18584 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
18:01:08:164 DEBUG 18584 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200 (266ms)
18:01:08:164 DEBUG 18584 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
18:01:08:164 DEBUG 18584 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
18:01:08:164 DEBUG 18584 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Sat, 22 Jun 2024 10:01:08 GMT
18:01:08:164 DEBUG 18584 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
18:01:08:164 DEBUG 18584 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
18:01:08:164 DEBUG 18584 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
18:01:08:171 DEBUG 18584 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
18:01:08:172 DEBUG 18584 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2024-06-22T18:01:08.165270600(LocalDateTime), 1804454554565242883(Long), 0(Integer), 1(Integer)
18:01:08:176 DEBUG 18584 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
18:01:08:179  INFO 18584 --- [http-nio-8086-exec-2] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [127.0.0.1:5672]
18:01:08:218  INFO 18584 --- [http-nio-8086-exec-2] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#2b395581:0/SimpleConnection@68545af5 [delegate=amqp://hmall@127.0.0.1:5672//hmall, localPort= 64008]
18:01:08:496  INFO 18584 --- [nacos-grpc-client-executor-30] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] Receive server push request, request = NotifySubscriberRequest, requestId = 68
18:01:08:500  INFO 18584 --- [nacos-grpc-client-executor-30] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] Ack server push request, request = NotifySubscriberRequest, requestId = 68
18:06:22:468 DEBUG 18584 --- [http-nio-8086-exec-4] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
18:06:22:469 DEBUG 18584 --- [http-nio-8086-exec-4] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1804455882142224385(Long)
18:06:22:471 DEBUG 18584 --- [http-nio-8086-exec-4] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
18:06:22:474 DEBUG 18584 --- [http-nio-8086-exec-4] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
18:06:22:476 DEBUG 18584 --- [http-nio-8086-exec-4] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1804455883584991233(Long), 1804455882142224385(Long), 1804455883526270977(Long), 2(Long), balance(String), 9700(Integer), 5(Integer), 1(Integer), 2024-06-22T20:06:22.472463200(LocalDateTime)
18:06:22:480 DEBUG 18584 --- [http-nio-8086-exec-4] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
18:08:47:780 DEBUG 18584 --- [http-nio-8086-exec-6] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
18:08:47:781 DEBUG 18584 --- [http-nio-8086-exec-6] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1804455883584991233(Long)
18:08:47:784 DEBUG 18584 --- [http-nio-8086-exec-6] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
18:08:47:785 DEBUG 18584 --- [http-nio-8086-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=9700 HTTP/1.1
18:08:47:785 DEBUG 18584 --- [http-nio-8086-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 2
18:08:47:785 DEBUG 18584 --- [http-nio-8086-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
18:08:47:914 DEBUG 18584 --- [http-nio-8086-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200 (128ms)
18:08:47:914 DEBUG 18584 --- [http-nio-8086-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
18:08:47:914 DEBUG 18584 --- [http-nio-8086-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
18:08:47:914 DEBUG 18584 --- [http-nio-8086-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Sat, 22 Jun 2024 10:08:47 GMT
18:08:47:914 DEBUG 18584 --- [http-nio-8086-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
18:08:47:914 DEBUG 18584 --- [http-nio-8086-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
18:08:47:914 DEBUG 18584 --- [http-nio-8086-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
18:08:47:917 DEBUG 18584 --- [http-nio-8086-exec-6] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
18:08:47:918 DEBUG 18584 --- [http-nio-8086-exec-6] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2024-06-22T18:08:47.914905(LocalDateTime), 1804455883584991233(Long), 0(Integer), 1(Integer)
18:08:47:921 DEBUG 18584 --- [http-nio-8086-exec-6] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
18:12:45:309 DEBUG 18584 --- [http-nio-8086-exec-8] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
18:12:45:312 DEBUG 18584 --- [http-nio-8086-exec-8] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1804457487918927873(Long)
18:12:45:316 DEBUG 18584 --- [http-nio-8086-exec-8] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
18:12:45:318 DEBUG 18584 --- [http-nio-8086-exec-8] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
18:12:45:319 DEBUG 18584 --- [http-nio-8086-exec-8] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1804457489311363074(Long), 1804457487918927873(Long), 1804457489311363073(Long), 2(Long), balance(String), 9700(Integer), 5(Integer), 1(Integer), 2024-06-22T20:12:45.316838(LocalDateTime)
18:12:45:324 DEBUG 18584 --- [http-nio-8086-exec-8] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
18:13:16:756 DEBUG 18584 --- [http-nio-8086-exec-9] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
18:13:16:757 DEBUG 18584 --- [http-nio-8086-exec-9] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1804457489311363074(Long)
18:13:16:760 DEBUG 18584 --- [http-nio-8086-exec-9] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
18:13:16:760 DEBUG 18584 --- [http-nio-8086-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=9700 HTTP/1.1
18:13:16:760 DEBUG 18584 --- [http-nio-8086-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 2
18:13:16:760 DEBUG 18584 --- [http-nio-8086-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
18:13:16:872 DEBUG 18584 --- [http-nio-8086-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200 (111ms)
18:13:16:872 DEBUG 18584 --- [http-nio-8086-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
18:13:16:873 DEBUG 18584 --- [http-nio-8086-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
18:13:16:873 DEBUG 18584 --- [http-nio-8086-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Sat, 22 Jun 2024 10:13:16 GMT
18:13:16:873 DEBUG 18584 --- [http-nio-8086-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
18:13:16:873 DEBUG 18584 --- [http-nio-8086-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
18:13:16:873 DEBUG 18584 --- [http-nio-8086-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
18:13:16:874 DEBUG 18584 --- [http-nio-8086-exec-9] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
18:13:16:875 DEBUG 18584 --- [http-nio-8086-exec-9] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2024-06-22T18:13:16.873764(LocalDateTime), 1804457489311363074(Long), 0(Integer), 1(Integer)
18:13:16:878 DEBUG 18584 --- [http-nio-8086-exec-9] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
21:52:44:322  INFO 18584 --- [nacos-grpc-client-executor-199] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] Receive server push request, request = ClientDetectionRequest, requestId = 72
21:52:44:322  INFO 18584 --- [nacos-grpc-client-executor-199] com.alibaba.nacos.common.remote.client   : [6170ea93-0113-4977-bbde-0c0492fc7022] Ack server push request, request = ClientDetectionRequest, requestId = 72
21:52:50:433  WARN 18584 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3h38m14s662ms618µs701ns).
22:22:02:101 DEBUG 18584 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
22:22:02:108 DEBUG 18584 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1804520219699548162(Long)
22:22:02:123 DEBUG 18584 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
22:22:02:132 DEBUG 18584 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
22:22:02:134 DEBUG 18584 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1804520222769704962(Long), 1804520219699548162(Long), 1804520222769704961(Long), 1(Long), balance(String), 8900(Integer), 5(Integer), 1(Integer), 2024-06-23T00:22:02.129510500(LocalDateTime)
22:22:02:147 DEBUG 18584 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
22:24:18:446 DEBUG 18584 --- [http-nio-8086-exec-3] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
22:24:18:448 DEBUG 18584 --- [http-nio-8086-exec-3] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1804520222769704962(Long)
22:24:18:457 DEBUG 18584 --- [http-nio-8086-exec-3] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
22:24:18:464 DEBUG 18584 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=8900 HTTP/1.1
22:24:18:464 DEBUG 18584 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
22:24:18:464 DEBUG 18584 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
22:24:18:789 DEBUG 18584 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200 (324ms)
22:24:18:789 DEBUG 18584 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
22:24:18:789 DEBUG 18584 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
22:24:18:789 DEBUG 18584 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Sat, 22 Jun 2024 14:24:18 GMT
22:24:18:790 DEBUG 18584 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
22:24:18:790 DEBUG 18584 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
22:24:18:790 DEBUG 18584 --- [http-nio-8086-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
22:24:18:796 DEBUG 18584 --- [http-nio-8086-exec-3] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
22:24:18:798 DEBUG 18584 --- [http-nio-8086-exec-3] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2024-06-22T22:24:18.790371800(LocalDateTime), 1804520222769704962(Long), 0(Integer), 1(Integer)
22:24:18:805 DEBUG 18584 --- [http-nio-8086-exec-3] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
22:48:04:618  WARN 18584 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
22:48:04:622  WARN 18584 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
22:48:04:622  WARN 18584 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
22:48:04:626  WARN 18584 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
22:48:07:139  INFO 18584 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
22:48:07:147  INFO 18584 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
22:48:07:471  INFO 18584 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
22:48:07:471  INFO 18584 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@26bc1afe[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
22:48:07:472  INFO 18584 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1719050385643_172.17.0.1_36282
22:48:07:477  INFO 18584 --- [nacos-grpc-client-executor-942] c.a.n.c.remote.client.grpc.GrpcClient    : [1719050385643_172.17.0.1_36282]Ignore complete event,isRunning:false,isAbandon=false
22:48:07:489  INFO 18584 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@66cb8dd2[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 943]
22:48:07:503  INFO 18584 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
22:48:07:520  INFO 18584 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
